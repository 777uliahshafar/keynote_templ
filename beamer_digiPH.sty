% mathematische Formeln mit Serifen setzen
%\usefonttheme[onlymath]{serif}

% andere Schriftart verwenden, sonst gibt es eine Warnung
%\usepackage{lmodern}

% Miniframe-Navigation aktivieren
\useoutertheme[subsection=false]{miniframes}

% This theme is nearly a black and white theme and useful for creating presentations that are easy to print on a black-and-white printer. The theme uses grayscale in certain unavoidable cases, but never color. It also changes the font of alerted text to bold face.
\usecolortheme{dove}
% orange Farbe definieren

\definecolor{digiPH_darkblue}{RGB}{0,21,70}
\definecolor{digiPH_ocean}{RGB}{35,58,100}
\definecolor{digiPH_leaf}{RGB}{29,92,67}
\definecolor{digiPH_stem}{RGB}{112,108,59}
\definecolor{digiPH_orange}{rgb}{1,0.753,0}
\definecolor{digiPH_darkorange}{rgb}{0.808,0.451,0.216}
\definecolor{digiPH_blue}{rgb}{0.357,0.608,0.835}
\definecolor{digiPH_gray}{RGB}{239,239,239}
\definecolor{digiPH_undip}{RGB}{55,89,133}
\definecolor{digiPH_writer}{RGB}{29,32,33}

% Farben anpassen
\setbeamercolor{title}{fg=digiPH_orange!89}
\setbeamercolor{author}{fg=digiPH_orange!40}
\setbeamercolor{date}{fg=digiPH_darkblue!80}
\setbeamercolor{institute}{fg=digiPH_darkblue!80}
\setbeamercolor{section number projected}{bg=digiPH_darkorange}
\setbeamercolor{frametitle}{fg=digiPH_darkblue,bg=white}
\setbeamercolor{itemize item}{fg=digiPH_darkblue}
\setbeamercolor{itemize subitem}{fg=digiPH_darkblue}
\setbeamercolor{enumerate item}{fg=digiPH_darkblue}
\setbeamercolor{enumerate subitem}{fg=digiPH_darkblue}
\setbeamercolor{caption name}{fg=digiPH_darkblue}
\setbeamercolor{mini frame}{fg=digiPH_undip!80}
\setbeamercolor{section in head/foot}{fg=digiPH_undip}
\setbeamercolor{section in toc shaded}{fg=digiPH_darkblue!50}
\setbeamercolor{section in toc}{fg=digiPH_darkblue!150}
\setbeamercolor{subsection in toc shaded}{fg=digiPH_darkblue!50}
\setbeamercolor{subsection in toc}{fg=digiPH_darkblue!150}
%Customization block
\setbeamertemplate{blocks}[rounded][shadow=false]
\setbeamercolor{block title}{fg=digiPH_darkblue,bg=digiPH_gray!170}
\setbeamercolor{block body}{bg=digiPH_gray!25}
\setbeamercolor{block title alerted}{fg=digiPH_ocean,bg=digiPH_gray!170}
\setbeamercolor{block body alerted}{bg=digiPH_leaf!25}
\setbeamercolor{block title example}{fg=digiPH_darkblue,bg=digiPH_orange}
\setbeamercolor{block body example}{bg=digiPH_ocean!5}

\setbeamerfont{frametitle}{size=\fontsize{20}{24}}
\setbeamerfont{framesubtitle}{size=\fontsize{14}{18}}

% Navigationssymbole ausschalten
\setbeamertemplate{navigation symbols}{}

\newenvironment{withoutheadline}{%
	\setbeamercolor{background canvas}{bg=white}
	\setbeamertemplate{headline}[default]%
	\def\beamer@entrycode{\vspace*{-\headheight}}%
	\setbeamertemplate{footline}{}
}{}

%-----------------------------------------------------------------------
% frametitle
%
%-----------------------------------------------------------------------

\makeatletter
\defbeamertemplate{frametitle}{standard}
{%
	\ifbeamercolorempty[bg]{frametitle}{}{\nointerlineskip}%
	\@tempdima=\textwidth%
	\advance\@tempdima by\beamer@leftmargin%
	\advance\@tempdima by\beamer@rightmargin%
	\pgfsetfillopacity{.15}%fill opacity
	\begin{beamercolorbox}[sep=0.5cm,left,wd=\the\@tempdima]{frametitle}
		\usebeamerfont{frametitle}%
		\vbox{}\vskip-0.25ex%
		\if@tempswa\else\csname beamer@fteleft\endcsname\fi%
		\strut\pgfsetfillopacity{1}\insertframetitle\strut\par%
		\vskip-.25\baselineskip%
		\leaders\vrule width \paperwidth\vskip0.4pt%
		\vskip2pt%
		\nointerlineskip
		{%
			\ifx\insertframesubtitle\@empty%
				\else%
				{\usebeamerfont{framesubtitle}\usebeamercolor[fg]{framesubtitle}\insertframesubtitle\strut\par}%
			\fi
		}%
		\vskip-1ex%
		\if@tempswa\else\vskip-.3cm\fi% set inside beamercolorbox... evil here...
	\end{beamercolorbox}%
}


\defbeamertemplate{frametitle}{imageplus}
{%
	\ifbeamercolorempty[bg]{frametitle}{}{\nointerlineskip}%
	\@tempdima=\textwidth%
	\advance\@tempdima by\beamer@leftmargin%
	\advance\@tempdima by\beamer@rightmargin%
	\pgfsetfillopacity{.2}%fill opacity
	\begin{beamercolorbox}[sep=0.5cm,left,wd=\the\@tempdima]{frametitle}
		\usebeamerfont{frametitle}%
		\vbox{}\vskip-0.25ex%
		\if@tempswa\else\csname beamer@fteleft\endcsname\fi%
		\strut\pgfsetfillopacity{1}\insertframetitle\strut\includegraphics[width=1cm]{logo}
		\vskip-.25\baselineskip%
		\leaders\vrule width \paperwidth\vskip0.4pt%
		\vskip2pt%
		\nointerlineskip
		{%
			\ifx\insertframesubtitle\@empty%
				\else%
				{\usebeamerfont{framesubtitle}\usebeamercolor[fg]{framesubtitle}\insertframesubtitle\strut\par}%
			\fi
		}%
		\vskip-1ex%
		\if@tempswa\else\vskip-.3cm\fi% set inside beamercolorbox... evil here...
	\end{beamercolorbox}%
}
\defbeamertemplate{frametitle}{center}
{%
	\ifbeamercolorempty[bg]{frametitle}{}{\nointerlineskip}%
	\@tempdima=\textwidth%
	\advance\@tempdima by\beamer@leftmargin%
	\advance\@tempdima by\beamer@rightmargin%
	\pgfsetfillopacity{.2}%fill opacity
	\begin{beamercolorbox}[sep=0.5cm,left,wd=\the\@tempdima]{frametitle}
		\usebeamerfont{frametitle}%
		\vbox{}\vskip-0.25ex%
		\if@tempswa\else\csname beamer@fteleft\endcsname\fi%
		\strut\pgfsetfillopacity{1}\centering\insertframetitle\strut\par
		\vskip-.25\baselineskip%
		\leaders\vrule width \paperwidth\vskip0.4pt%
		\vskip2pt%
		\nointerlineskip
		{%
			\ifx\insertframesubtitle\@empty%
				\else%
				{\usebeamerfont{framesubtitle}\usebeamercolor[fg]{framesubtitle}\insertframesubtitle\strut\par}%
			\fi
		}%
		\vskip-1ex%
		\if@tempswa\else\vskip-.3cm\fi% set inside beamercolorbox... evil here...
	\end{beamercolorbox}%
}

\makeatother


%-----------------------------------------------------------------------
% background canvas color
%
%-----------------------------------------------------------------------
\makeatletter
\defbeamertemplate{background canvas}{color}[1][white]{%
	\begin{tikzpicture}
		\useasboundingbox (0,0) rectangle (\the\paperwidth,\the\paperheight);
		\fill[fill=#1] (0,0) rectangle (\the\paperwidth,\the\paperheight);
		\node[anchor=north west,inner sep=0pt,outer sep=0pt] at (0,\the\paperheight) {};
	\end{tikzpicture}
}

\defbeamertemplate{background canvas}{image}[1][placeholder]{%
	\begin{tikzpicture}
		\useasboundingbox (0,0) rectangle (\the\paperwidth,\the\paperheight);
		\includegraphics[width=\paperwidth,height=\paperheight]{#1} (0,0) rectangle (\the\paperwidth,\the\paperheight);
		\node[anchor=north west,inner sep=0pt,outer sep=0pt] at (0,\the\paperheight) {};
	\end{tikzpicture}

}
%-----------------------------------------------------------------------
% stabilizer to default
%
%-----------------------------------------------------------------------
\BeforeBeginEnvironment{frame}{%
	\setbeamertemplate{background canvas}[color][white]%
	\setbeamertemplate{frametitle}[standard]
	\setbeamercolor{frametitle}{fg=digiPH_writer}
	\setbeamercolor{normal text}{fg=digiPH_writer}\usebeamercolor*{normal text}%
}


%-----------------------------------------------------------------------
% define key NB: The order is crucial
%
%-----------------------------------------------------------------------


\makeatletter
\define@key{beamerframe}{mycolor}[true]{%
	\setbeamertemplate{background canvas}[color][#1]%
	\setbeamercolor{normal text}{fg=white}\usebeamercolor*{normal text}%
	\setbeamercolor{frametitle}{fg=white}
}
\define@key{beamerframe}{mytitle}[true]{%
	\setbeamertemplate{frametitle}[#1]
}
\define@key{beamerframe}{mybg}[true]{%
	\setbeamertemplate{background canvas}[image][#1]%
}
\makeatother
